---
description: 
globs: 
alwaysApply: true
---
Hier ist das **vollständige Markdown** für dein gesamtes Landingpage-Modul – alle Bereiche und Details in einer Datei:

---

````markdown
# Modul: Landingpages

---

## Zweck

Das Landingpage-Modul ermöglicht die Erstellung, Gestaltung und Verwaltung modularer Zielseiten mit einem visuellen Builder. Jede Seite ist tief mit anderen Modulen wie Kampagnen, Formularen, Verträgen, CI-Presets, Kursplan und Analyse-Tools verknüpft. Der Builder basiert auf Blöcken mit klar definierten Layout- und Design-Presets.

---

## Datenbankstruktur

### Tabelle: public.landingpage

| Feld               | Typ        | Beschreibung                         |
|--------------------|------------|--------------------------------------|
| id                 | UUID       | Primärschlüssel                      |
| title              | TEXT       | Interner Name der Seite              |
| slug               | TEXT       | URL-Pfad (z. B. „rueckenfit“)        |
| language           | TEXT       | Sprachkennung (z. B. „de“, „en“)     |
| tags               | TEXT[]     | Kategorisierung (frei wählbar)       |
| headline           | TEXT       | Hauptüberschrift (optional)          |
| subheadline        | TEXT       | Unterzeile (optional)                |
| description        | TEXT       | SEO-Beschreibung                     |
| is_active          | BOOLEAN    | Veröffentlicht oder Entwurf          |
| preview_image      | TEXT       | Vorschaubild für Übersicht           |
| tracking_pixel_id  | TEXT       | Meta-/Google-Pixel o. Ä.             |
| campaign_id        | UUID       | Verknüpfung zur Kampagne             |
| campaign_strand_id | UUID       | Optional: Feiner Zielgruppenpfad     |
| ci_preset_id       | UUID       | Verknüpfung zu Styling-Presets       |
| qr_code_url        | TEXT       | Automatisch generierter QR           |
| form_id            | UUID       | Verknüpftes Formular                 |
| redirect_url       | TEXT       | Zielseite nach Formabsendung         |
| created_at         | TIMESTAMP  | Erstellt                             |
| updated_at         | TIMESTAMP  | Letzte Änderung                      |

### Tabelle: public.landingpage_block

| Feld             | Typ      | Beschreibung                              |
|------------------|----------|-------------------------------------------|
| id               | UUID     | Primärschlüssel                           |
| landingpage_id   | UUID     | Referenz auf landingpage.id               |
| block_type       | ENUM     | Siehe unten                               |
| position         | INTEGER  | Reihenfolge auf der Seite                 |
| layout           | TEXT     | Spaltenanzahl, z. B. „1-col“, „2-col“     |
| preset           | TEXT     | Visuelles Preset (z. B. „Card Wide“)      |
| content_json     | JSONB    | Strukturierte Inhalte & Parameter         |
| file_asset_id    | UUID     | Optional verknüpftes Bild/Icon            |
| created_at       | TIMESTAMP| Erstellt                                  |
| updated_at       | TIMESTAMP| Aktualisiert                              |

### ENUMS: block_type

```text
'header', 'text', 'image', 'form', 'button', 'testimonial', 'video', 'headline', 'spacer',
'pricing', 'feature', 'countdown', 'service', 'courseplan', 'gamification',
'cta', 'faq', 'contact', 'team', 'trust_logos', 'statistics', 'blog_preview', 'icon', 'gallery'
````

---

## UI/UX-Workflow

1. **Landingpage erstellen:** Titel, Slug, Sprache, Tags angeben
2. **Startoption:** Leere Canvas oder Vorlage (Template)
3. **Builder (Split-Ansicht):**

   * Links: Blockbibliothek + globale Einstellungen
   * Mitte: Live-Canvas (Drag & Drop, Vorschau)
   * Rechts: Block-Konfiguration (Inhalt, Layout, Preset)
4. **Verknüpfung mit Kampagne/CI:** visuell angezeigt
5. **QR-Code:** nach Liveschaltung generierbar
6. **Vorschau:** Mobil/Tablet/Desktop
7. **Veröffentlichung:** is\_active = true

---

## Globale Einstellungen

* Titel, Slug, Sprache, Tags
* Kampagne, Strang, CI-Styling-Preset
* Veröffentlichung, Zeitsteuerung, Passwortschutz
* SEO: Meta-Titel, Beschreibung, OG-Bild
* Tracking: Pixel, Events, Ziele
* QR-Code: bei Liveschaltung generiert

---

## Submodul-Verknüpfungen

* CI-Styling-Presets: Farben, Fonts, Buttons
* Formular-Builder: Popup/Inline, Kontextprüfung, Leadquelle
* Kampagnenmodul: Zeitraum, Aktionen, Landingpages
* Vertragsmodul: Preise, Laufzeiten, USPs, Dienstleistungsliste
* Kursplan-Modul: separat gepflegt, aber Block im Builder
* Gamification-Modul: Fortschritt, Wheel, Sofortgewinn
* Testimonials: kuratiert & filterbar

---

## Blöcke – Layouts, Einstellungen & Design-Presets

### Inhalts- & Design-Blöcke

1. **Header-Block**

   * **Layouts:** 1-Spaltig zentriert, Split (Bild/Text), Vollbreite BG
   * **Einstellungen:** Titel, Subline, Bild, CTA, Hintergrund, Ausrichtung
   * **Presets:** Hero Centered, Hero Split, Image Overlay, Minimal, Clean Color

2. **Text-/Richtext-Block**

   * **Layouts:** 1-/2-Spaltig, Info-Box, Zitat
   * **Einstellungen:** Titel, Text, Icons, Listen, Stil
   * **Presets:** Classic Paragraph, Two-Column Info, Callout Quote, Info Card, Text & Icon

3. **Bild-/Galerie-Block**

   * **Layouts:** Grid, Karussell, Fullwidth, Lightbox
   * **Einstellungen:** Bild(er), Bildtitel, Beschreibung, Link, Reihenfolge
   * **Presets:** Lightbox Grid, Scroll Carousel, Wide Banner, Hover Zoom, Split Image/Text

4. **Video-Block**

   * **Layouts:** Zentriert, Fullwidth, Split
   * **Einstellungen:** URL, Thumbnail, Autoplay, Beschreibung
   * **Presets:** Clean Video, Framed, Side-by-Side, Overlay Start, YouTube/Card

5. **Button-Block**

   * **Layouts:** Einzeln, 2 Buttons, Floating, Sticky
   * **Einstellungen:** Text, Ziel, Stil, Icon
   * **Presets:** Flat, Rounded, Ghost, Shadowed, Icon + Text

6. **Icon-Block**

   * **Layouts:** Grid, Row, Highlight-Boxen
   * **Einstellungen:** Icons, Titel, Beschreibung, Spalten, CI-Farbe
   * **Presets:** Icon Grid Clean, Icon Row, Badge Icons, Shadow Box, Transparent Icons

### Funktionale & Struktur-Blöcke

7. **Testimonials-Block**

   * **Layouts:** 1–3 Spalten, Karussell
   * **Einstellungen:** Name, Bild, Text, Sterne, Alter, Filter
   * **Presets:** Card Wide, Quote Overlay, Grid Cards, Carousel, Mini-Review

8. **Pricing-Block**

   * **Layouts:** 1–3 Spalten, Vergleich
   * **Einstellungen:** Tarife, Laufzeiten, USPs, Rabatte, Startpaket
   * **Presets:** Highlight Center, Rabatt-Badge, Mirror Compare, Flat Grid, Floating Tile

9. **Feature-Block**

   * **Layouts:** 1–3 Spalten, Grid, Kachel
   * **Einstellungen:** Vorteil, Icon, Beschreibung, Highlight
   * **Presets:** Flat Grid, Badge Style, Icon Facts, Circle Icons, Hover Box

10. **Countdown-Block**

    * **Layouts:** Zentriert, Inline, Balken
    * **Einstellungen:** Zeitvorgabe, Text, Stil
    * **Presets:** Classic Timer, Inline Text, Balken mit Restzeit, Box mit Icon, Animated

11. **Formular-Block**

    * **Layouts:** Inline, Popup, Sticky-Button
    * **Einstellungen:** Formular, Felder, Kontext, Trigger
    * **Presets:** Modern Clean, Highlight Box, Side-Panel, Floating Modal, Fullwidth Inline

12. **Dienstleistungs-Block**

    * **Layouts:** 1–3 Spalten, Icon+Text, Grid
    * **Einstellungen:** Daten aus Vertrag, Gruppierung, Icons
    * **Presets:** Icon Tiles, Rounded Cards, Inline Icons, Split View, Badge Grid

13. **Kursplan-Block**

    * **Layouts:** Spaltenraster, Zeitstrahl, Kompakt
    * **Einstellungen:** Tage, Filter, Räume, Layout
    * **Presets:** Weekly Grid, Category Filter, Nächster Kurs, Compact Cards, Tabbed View

14. **Gamification-Block**

    * **Layouts:** Popup, Inline, Bereich
    * **Einstellungen:** Typ, Trigger, Belohnung
    * **Presets:** Glücksrad, Fortschrittsbalken, Reward-Popup, Puzzle Reveal, Points Tracker

15. **FAQ-Block**

    * **Layouts:** Accordion, Grid, Karteikarten
    * **Einstellungen:** Fragen, Antworten, Kategorie, Icons
    * **Presets:** Standard Accordion, Card Toggle, Icon-based, Minimal Expand, Highlighted

16. **Kontakt-Block**

    * **Layouts:** 2-Spaltig, Map integriert, Kompakt
    * **Einstellungen:** Adresse, Öffnungszeiten, Map, Formular, Socials
    * **Presets:** Split Map, Compact Info, Overlay Map, Card Contact, Highlight Block

17. **Team-/Mitarbeiter-Block**

    * **Layouts:** Grid, Karussell, 1–3 Spalten
    * **Einstellungen:** Name, Rolle, Bild, Beschreibung
    * **Presets:** Team Grid, Slide Carousel, Circle Cards, Spotlight, Clean Row

18. **Trust-Logos-Block**

    * **Layouts:** Grid, Strip, Slider
    * **Einstellungen:** Logos, Links, Reihenfolge
    * **Presets:** Logo Strip, Gray Out, Carousel Strip, Fullcolor Grid, Transparent

19. **Erfolgszahlen-/Statistikblock**

    * **Layouts:** 1–3 Spalten, Icon+Zahl
    * **Einstellungen:** Zahl, Text, Icon, Animation
    * **Presets:** Animated Counter, Highlight Box, Icon + Fact, Number Badge, Compact Row

20. **Blog-/Content-Preview-Block**

    * **Layouts:** List, Card Grid, Featured+List
    * **Einstellungen:** Quelle, Anzahl, Kategorie, Teaser
    * **Presets:** Blog Card, Clean List, Highlighted Article, Image Tile, Featured Hero

---

## Dynamische Logiken

* CI-Preset wirkt auf Farben, Buttons, Schrift global
* Formular-Kontext erkennt Angebot & Vertrag automatisch
* Kampagnenbindung übernimmt Countdown-Zeitraum, Aktionen, Preise
* Live-Designvorschläge passend zu Inhalten und Einstellungen

---

## Validierungslogik

* slug eindeutig
* Jeder Block: gültiger block\_type, layout, preset
* form\_id nur bei Formularblock
* Position >= 0, keine Duplikate je Landingpage
* QR-Code nur bei is\_active = true

---

## Verknüpfungen

| Zielmodul      | Bedeutung                               |
| -------------- | --------------------------------------- |
| Kampagnen      | campaign\_id/strand\_id, Zeit, Aktionen |
| Dateimanager   | Bilder, Icons als file\_asset           |
| Leads          | Formularauswertung                      |
| Canva          | QR-Code, visuelle Vorlagen              |
| CI-Preset      | Styling, Buttons, Farben                |
| Vertragsmodul  | Preise, Dienstleistungen, Features      |
| Kursplan-Modul | Separates Modul, eingebettet als Block  |
| Gamification   | Verknüpft als Submodul                  |

---

## Cursor-Hinweis

* Jede Landingpage = Sammlung von Blöcken (layout, preset, content\_json)
* Presets & Layouts via ENUM-Validierung und JSON-Struktur
* Drag-n-Drop: position + block\_type + preset steuern Darstellung
* Dynamische Vorschlagslogik auf Basis der Inhalte

---

## Exportierbare Elemente

* Vorschau als PNG/SVG
* QR-Code für Canva
* JSON-Export für Cursor/API

```


