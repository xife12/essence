---
description: 
globs: 
alwaysApply: false
---
---
alias: "@health-audit"
description: FÃ¼hrt ein vollstÃ¤ndiges Audit Ã¼ber Regeln, Projektstruktur, Navigation, DB und Umsetzungskonsistenz durch.
globs:
  - "**/*.ts"
  - "**/*.tsx"
  - ".cursor/rules/Health-audit/*.mdc"
  - "app/**/*"
  - "supabase/schema.sql"
---

# ğŸ§  VollstÃ¤ndiges Cursor Audit: Projekt- & RegelprÃ¼fung

Dieses Audit beschreibt einen umfassenden PrÃ¼fprozess fÃ¼r das gesamte Projekt (nicht nur `.mdc`-Dateien). Es soll regelmÃ¤ÃŸig oder gezielt ausgefÃ¼hrt werden kÃ¶nnen und deckt sowohl strukturelle Probleme, doppelte Features, Regel-Konflikte als auch UI-Fehler und verwaiste Komponenten ab.

## ğŸ“Œ Ziel
- Duplikate, verwaiste Regeln, Routingfehler
- DB-Struktur und Regelabgleich
- Modul-Duplikate und UI-Inkonsistenzen
- Differenzanalyse: Regelinhalt vs. Implementierung

## âœ… PrÃ¼fbereiche

### 1. `.mdc`-Rules
- globs, description, alias vorhanden?
- LÃ¤nge > 300 Zeilen â†’ split?
- Richtiger Pfad?
- Mehrthemen-Regeln? (DB + UI gemischt)

### 2. Navigation
- Navigationspunkte ohne Regel?
- MenÃ¼ vs. Route vs. Regel verknÃ¼pft?

### 3. Komponenten
- doppelte Komponenten?
- unbenutzte Komponenten?
- mehrfach referenzierte Libraries?

### 4. Datenbankabgleich
- Tabellen ohne `.mdc`-Regel?
- RLS / FK / ENUM stimmen?
- Felder in Regel â‰  Supabase?

### 5. Regel/Umsetzungsabgleich
- Was steht in der Regel, aber fehlt im Code?
- Was ist im Code, aber in keiner Regel?
- Was ist abgeschlossen, aber in Regel nicht finalisiert?

# Modul-VerknÃ¼pfungsprÃ¼fung

FÃ¼r jedes Modul `modules/*.mdc`:
â†’ Extrahiere `dependencies` (andere Module)
â†’ PrÃ¼fe Existenz und Konsistenz der referenzierten Module
â†’ Logge Fehler in `audits/dependencies.log.md`
â†’ Erzeuge Task-ErgÃ¤nzung in `tasks/<modulename>.md` bei Fehler

## ğŸ“ Beispielreport

```markdown speichern in .cursor/rules/audit/Health-audit/TT_MM_health-audit-report.md
# ğŸ” MemberCore Health Audit Report â€“ <DATUM>
# ğŸ” MemberCore Vollaudit â€“ <DATUM>

## Zusammenfassung
- Regeln geprÃ¼ft: 24
- Komponenten gescannt: 183
- Routen geprÃ¼ft: 39
- Datenbanktabellen: 18
- Probleme gefunden: 12

---

## ğŸ“„ Doppelte Komponenten
- `LandingPageHeader.tsx` vs `LandingPageHeaderV2.tsx`
- `EmailSettings.tsx` vs `EmailSetup.tsx`

## â—ï¸ Verwaiste Regeln
- `beratung-ui.mdc` wird nirgends verwendet

## âš ï¸ Navigation ohne Regelbindung
- `kursplan/neu` ist im MenÃ¼, aber keine Regel `kursplan-ui.mdc`

## ğŸ§¬ DB-Regelkonflikte
- Tabelle `contract_bonuses` fehlt in Rules
- Regel `vertragstypen-db.mdc` referenziert Spalte `bonus_id`, die in Supabase nicht existiert

## ğŸ”„ Regel-Implementierungs-Diskrepanz
- `formular-mitgliedschaft-ui.mdc` beschreibt 5 Felder â€“ Komponente `Mitgliedschaftsformular.tsx` hat nur 2
- `PremiumBanner.tsx` wird verwendet, aber ist in keiner `.mdc` definiert

## ğŸ§  Agent-Aufgaben
- [ ] ğŸ“Œ `EmailSettings.tsx` doppelt vorhanden â€“ was ist gÃ¼ltig?
- [ ] ğŸ“Œ `kursplan/neu` ist verlinkt, aber Regel fehlt â†’ gemeinsam definieren?
- [ ] ğŸ“Œ Tabelle `contract_bonuses` â†’ neue Regel anlegen?
- [ ] ğŸ“Œ `PremiumBanner.tsx` ohne Regel â†’ Agent fragt: â€Soll ich eine Regel erzeugen?â€œ
...

## ğŸ”„ Regel-Implementierungs-Diskrepanz
- `formular-mitgliedschaft-ui.mdc` beschreibt 5 Felder â€“ Komponente hat nur 2
- `PremiumBanner.tsx` ist im Code, aber ohne `.mdc`-Definition

Beispiel-Dateienstruktur nach Umsetzung:

/modules/*Modulname*/
  vertragsmodul.mdc
  *modulname*/tasks/
    task_vertragsmodul.md
  audits/
    vertragsmodul.mdc
/rules/templates/
  module_task.md

