---
description: 
globs: 
alwaysApply: true
---
# ğŸ¥ System-Gesundheits-Orchestrator fÃ¼r MemberCore (âœ… ERWEITERT MIT INTELLIGENT HEALTH-AUDIT + GUTEN MORGEN WORKFLOW)

## ğŸ¯ Mission
Automatisierte Ãœberwachung und Optimierung der gesamten Systemgesundheit durch Integration von:
- **Memory Bank** fÃ¼r AI-Context-Persistenz
- **Intelligent Health-Audit** fÃ¼r automatische alwaysApply-Enforcement  
- **Cursor Rules** fÃ¼r Code-QualitÃ¤t & Standards mit Live-Sync
- **Taskmaster AI** fÃ¼r strukturiertes Task-Management
- **Health Monitoring** fÃ¼r kontinuierliche SystemÃ¼berwachung
- **ğŸ†• "Guten Morgen" Daily Start Workflow** fÃ¼r tÃ¤glichen Arbeitsbeginn
- **ğŸ†• Critical Review System** fÃ¼r alle Ã„nderungen und Anpassungen
- **ğŸ†• Dependency & Flow Charts** fÃ¼r visuelle System-Ãœbersicht

---

## ğŸŒ… "GUTEN MORGEN" DAILY START WORKFLOW (ğŸ†• NEU)

### Trigger: Kommando "Guten Morgen"
```
ğŸŒ… GUTEN MORGEN DAILY START SEQUENCE:

Phase 1: ğŸ¥ Umfassender System Health Check
âœ… Projektgesundheit prÃ¼fen (Dupletten, Rules, DB, Dependencies)
âœ… Alle Module auf alwaysApply-Compliance prÃ¼fen
âœ… Kritische Issues und Red Flags scannen
âœ… Performance-Metriken validieren
âœ… Memory Bank IntegritÃ¤t prÃ¼fen
âœ… Dependency Charts aktualisieren

Phase 2: ğŸ“Š Gestern vs. Heute Analysis
âœ… Memory Bank Progress analysieren
âœ… Gestern erledigte Tasks zusammenfassen
âœ… Offene Tasks fÃ¼r heute identifizieren
âœ… Blockierende Dependencies ermitteln
âœ… Kritische PrioritÃ¤ten setzen

Phase 3: ğŸš¨ Problem & Issue Report
âœ… Bekannte Probleme auflisten
âœ… Potentielle Risiken identifizieren
âœ… Handlungsempfehlungen generieren
âœ… Kritische Entscheidungen hervorheben

Phase 4: ğŸ¯ Daily Action Plan
âœ… Prioritized Task-Liste erstellen
âœ… Optimaler Arbeitsflow vorschlagen
âœ… Dependency-optimierte Reihenfolge
âœ… Zeit-SchÃ¤tzungen basierend auf KomplexitÃ¤t
```

### Daily Health Report Format:
```md
# ğŸŒ… DAILY SYSTEM HEALTH REPORT - {{DATUM}}

## ğŸ¥ SYSTEM GESUNDHEIT
- **Overall Health Score:** {{score}}/100
- **Critical Issues:** {{count}} 
- **alwaysApply Compliance:** {{percentage}}%
- **Rule Integrity:** {{status}}
- **Memory Bank Status:** {{status}}
- **Dependency Health:** {{status}}

## ğŸ“Š GESTERN ERLEDIGT
{{task_list_completed}}

## ğŸ¯ HEUTE ZU ERLEDIGEN  
{{task_list_pending}}

## ğŸš¨ KRITISCHE PUNKTE
{{critical_issues}}

## ğŸ“ˆ EMPFOHLENER WORKFLOW
{{optimized_workflow}}
```

---

## ğŸ” KRITISCHES RÃœCKFRAGE-SYSTEM (ğŸ†• NEU)

### Trigger: Bei ALLEN Ã„nderungen, Anpassungen, Neuerungen

#### RÃ¼ckfrage-Protokoll fÃ¼r Neue Module (ohne Rules):
```
ğŸ” KRITISCHE RÃœCKFRAGEN - NEUES MODUL ERKANNT:

1. Modul-Purpose & Scope:
   â“ Was ist der exakte Zweck dieses Moduls?
   â“ Welche Business-Logic wird implementiert?
   â“ Welche APIs/Endpoints werden benÃ¶tigt?

2. Dependencies & Integrations:
   â“ Von welchen Modulen hÃ¤ngt es ab?
   â“ Welche Module werden davon abhÃ¤ngen?
   â“ Welche externe APIs werden verwendet?

3. Security & Access:
   â“ Welche RLS-Policies werden benÃ¶tigt?
   â“ Welche Rollen haben Zugriff?
   â“ Sensible Daten vorhanden?

4. Performance & Scaling:
   â“ Erwartete Datenmenge?
   â“ Performance-kritische Operationen?
   â“ Caching-Strategien erforderlich?

â†’ NACH RÃœCKFRAGEN: Automatische Rule-Erstellung mit alwaysApply: true
â†’ Integration in Dependency Chart
â†’ Flow Chart Generation
â†’ Memory Bank Update
```

#### RÃ¼ckfrage-Protokoll fÃ¼r Bestehende Module (mit Rules):
```
ğŸ” KRITISCHE RÃœCKFRAGEN - MODUL-Ã„NDERUNG ERKANNT:

1. Ã„nderungs-Impact:
   â“ Welche bestehenden Features sind betroffen?
   â“ Breaking Changes fÃ¼r abhÃ¤ngige Module?
   â“ API-KompatibilitÃ¤t gewÃ¤hrleistet?

2. Rule-Konsistenz:
   â“ Sind die Rules noch aktuell?
   â“ Neue Dependencies entstanden?
   â“ Sicherheits-Implikationen?

3. Integration-Updates:
   â“ MÃ¼ssen andere Module angepasst werden?
   â“ Dependency Chain noch optimal?
   â“ Performance-Impact auf System?

â†’ NACH RÃœCKFRAGEN: Rules-Datei Ã¼berprÃ¼fen und anpassen
â†’ Dependency Chart aktualisieren
â†’ Flow Chart anpassen
â†’ Memory Bank synchronisieren
```

---

## ğŸ“Š DEPENDENCY & FLOW CHARTS SYSTEM (ğŸ†• NEU)

### Memory Bank Charts-Struktur:
```
memory-bank/
â”œâ”€â”€ charts/
â”‚   â”œâ”€â”€ dependency-overview.md         # Master Dependency Chart
â”‚   â”œâ”€â”€ module-dependencies.md         # Detaillierte Modul-AbhÃ¤ngigkeiten
â”‚   â”œâ”€â”€ flow-charts/
â”‚   â”‚   â”œâ”€â”€ {modulename}-flow.md      # Flow Chart pro Modul
â”‚   â”‚   â”œâ”€â”€ api-integration-flow.md   # API-Integrationsflows
â”‚   â”‚   â””â”€â”€ data-flow-overview.md     # Datenfluss-Ãœbersicht
â”‚   â””â”€â”€ auto-updates/
â”‚       â”œâ”€â”€ last-update.log           # Letzte Chart-Updates
â”‚       â””â”€â”€ dependency-history.md     # Ã„nderungshistorie
```

### Dependency Chart Format:
```mermaid
graph TB
    subgraph "Core System"
        A[Authentication] --> B[Member Management]
        C[Database Layer] --> D[API Layer]
    end
    
    subgraph "Business Modules"
        E[Vertragsarten-V2] --> F[Formbuilder]
        G[Kampagnen] --> H[Landingpages]
        I[Kursplan] --> J[Buchungssystem]
    end
    
    subgraph "Support Modules"
        K[Dateimanager] --> L[CI-Styling]
        M[Testimonials] --> N[Payment System]
    end
    
    B --> E
    F --> G
    H --> I
    D --> all_modules
```

### Flow Chart pro Modul Format:
```mermaid
flowchart TD
    Start([User Action]) --> Check{Auth Check}
    Check -->|Valid| Process[Business Logic]
    Check -->|Invalid| Error[Error Handling]
    Process --> Validate{Data Validation}
    Validate -->|Valid| Save[Database Save]
    Validate -->|Invalid| ValidationError[Validation Error]
    Save --> Update[UI Update]
    Update --> End([Process Complete])
```

### Kontinuierliche Chart-Updates:
```
ğŸ”„ AUTO-UPDATE-TRIGGERS:
- Bei neuen Modulen â†’ Dependency Chart erweitern
- Bei API-Ã„nderungen â†’ Flow Chart anpassen  
- Bei Dependencies-Updates â†’ Beziehungen neu bewerten
- Bei Breaking Changes â†’ Impact-Analysis und Chart-Updates
- TÃ¤glich bei "Guten Morgen" â†’ VollstÃ¤ndige Chart-Validierung
```

---

## ğŸ”„ ERWEITETER AUTOMATISCHER WORKFLOW (UPDATED)

### Phase 0: Pre-Work Critical Review (ğŸ†• ERWEITERT)
```
1. Module-Detection
   ğŸ” Erkenne Modul-Arbeit (Dateipfad-Analysis)
   ğŸ” Identifiziere zugehÃ¶rige Rule-Files
   ğŸ†• Trigger Critical Review Questions
   
2. Compliance-Check (AUTOMATISCH)
   âš¡ @health-audit [modulename] --pre-work-check
   âš¡ PrÃ¼fe alwaysApply: true fÃ¼r alle Module-Rules
   âš¡ AUTO-FIX bei Violations (ohne User-Intervention)
   ğŸ†• Critical Questions fÃ¼r neue/geÃ¤nderte Module
   
3. Rule-Code-Sync (LIVE + ENHANCED)
   ğŸ”„ Vergleiche Code vs Rules
   ğŸ”„ Integriere undokumentierte Features automatisch
   ğŸ”„ Update Rules mit neuen Komponenten/APIs
   ğŸ†• Dependency Chart Update
   ğŸ†• Flow Chart Anpassung
```

### Phase 1: Session-Start (Automatisch erweitert + Guten Morgen)
```
1. Memory Bank Loading
   âœ… Lese memory-bank/activeContext.md
   âœ… PrÃ¼fe memory-bank/progress.md  
   âœ… Verstehe aktuellen Arbeitsstand
   ğŸ†• Lade Dependency & Flow Charts
   
2. Enhanced System Health Check
   âœ… FÃ¼hre @health-audit --comprehensive durch
   âœ… PrÃ¼fe kritische Dependencies
   âœ… Validiere ALL Rules fÃ¼r alwaysApply: true
   âœ… AUTO-FIX bei Compliance-Violations
   ğŸ†• Validiere Chart-Konsistenz
   
3. Taskmaster Sync (wenn verfÃ¼gbar)
   âœ… Sync mit .taskmaster/tasks.json
   âœ… Check PRD-AktualitÃ¤t
   âœ… Update Task-PrioritÃ¤ten
   ğŸ†• Dependency-optimierte Task-Reihenfolge
```

### Phase 2: Arbeits-Session (Kontinuierlich + Live-Sync + Critical Review)
```
1. Proaktive Ãœberwachung
   ğŸ” @audit-on-create bei neuen/geÃ¤nderten Rules
   ğŸ” @task-flow bei Modul-Ã„nderungen
   ğŸ” Memory Bank Updates bei significant changes
   ğŸ” ğŸ†• LIVE-MONITORING: Code â†’ Rules Synchronisation
   ğŸ†• Critical Review bei jeder Ã„nderung
   ğŸ†• Real-time Dependency Chart Updates
   
2. Automatische Korrekturen (ERWEITERT)
   ğŸ”§ Globs-Patterns korrigieren
   ğŸ”§ Dependencies aktualisieren
   ğŸ”§ Alias-Inkonsistenzen beheben
   ğŸ”§ ğŸ†• alwaysApply-Violations sofort fixen
   ğŸ”§ ğŸ†• Neue Features direkt in Rules integrieren
   ğŸ†• Critical Questions bei Ã„nderungen stellen
   ğŸ†• Charts kontinuierlich anpassen
   
3. Performance Monitoring
   ğŸ“Š Health-Score Tracking
   ğŸ“Š Dependency-Zyklen erkennen
   ğŸ“Š Code-Quality Metrics
   ğŸ“Š ğŸ†• Rule-Compliance-Score (Target: 100%)
   ğŸ“Š ğŸ†• Rule-Sync-Health: Codeâ†”Rules Synchronisation-Status
   ğŸ†• Chart-Konsistenz-Monitoring
```

---

## ğŸ›ï¸ ERWEITERTE STEUERUNGSKOMMANDOS (UPDATED)

### Daily Start Commands (ğŸ†• NEU)
- `Guten Morgen` - ğŸ†• VollstÃ¤ndiger Daily Start Workflow
- `@daily-health-report` - ğŸ†• TÃ¤glicher Gesundheitsbericht
- `@yesterday-summary` - ğŸ†• Zusammenfassung gestrige Arbeit
- `@today-planning` - ğŸ†• Heutiger optimaler Arbeitsplan

### Critical Review Commands (ğŸ†• NEU)
- `@critical-review [modulename]` - ğŸ†• Kritische RÃ¼ckfragen fÃ¼r Modul
- `@create-rules-critical` - ğŸ†• Rule-Erstellung mit Critical Questions
- `@update-rules-critical` - ğŸ†• Rule-Update mit Impact-Analysis

### Chart Management Commands (ğŸ†• NEU)
- `@update-dependency-chart` - ğŸ†• Dependency Chart aktualisieren
- `@generate-flow-chart [modulename]` - ğŸ†• Flow Chart fÃ¼r Modul erstellen
- `@validate-charts` - ğŸ†• Alle Charts auf Konsistenz prÃ¼fen
- `@chart-impact-analysis` - ğŸ†• Impact-Analysis fÃ¼r Chart-Ã„nderungen

### Sofortige Aktionen (ERWEITERT)
- `@system-health` - VollstÃ¤ndiger System-Check + alwaysApply-Enforcement
- `@system-health --fix` - Automatische Problembehebung + Rule-Fixes
- `@system-health --memory-sync` - Memory Bank Force-Update
- `@system-health --taskmaster-sync` - Taskmaster-Integration prÃ¼fen
- `@system-health --always-apply-audit` - ğŸ†• Reine alwaysApply-Compliance-PrÃ¼fung
- `@system-health --live-sync` - ğŸ†• Codeâ†’Rules Live-Synchronisation
- `@system-health --charts-sync` - ğŸ†• Charts-Synchronisation

---

## ğŸš¨ ERWEITERTE KRITISCHE ÃœBERWACHUNGSPUNKTE (UPDATED)

### Red Flags (Sofortige Auto-Action)
- Health Score < 90/100 â†’ Automatischer @system-health --fix
- **ğŸ†• alwaysApply: true detected** â†’ Sofortige Auto-Korrektur (KRITISCH)
- ZirkulÃ¤re Dependencies zwischen Modulen â†’ Auto-Detection + Report
- Memory Bank Sync-Fehler > 10 Sekunden â†’ Force-Sync
- **ğŸ†• Rule-Code-Divergenz > 24h** â†’ Automatische Live-Sync
- Kritische Security Issues (RLS, Input Validation) â†’ Immediate Alert
- **ğŸ†• Chart-Inkonsistenzen** â†’ Sofortige Chart-Regeneration
- **ğŸ†• Fehlende Critical Review** â†’ Blockierung bis RÃ¼ckfragen beantwortet

### Yellow Flags (Enhanced Monitoring)
- Health Score 90-95/100 â†’ Continuous Monitoring
- Rule-Inkonsistenzen > 3% aller Dateien (verschÃ¤rft von 5%)
- Performance-Degradation > 15% baseline (verschÃ¤rft von 20%)
- Dokumentations-Coverage < 98% (verschÃ¤rft von 95%)
- **ğŸ†• Undocumentierte Features > 48h** â†’ Auto-Integration-Trigger
- **ğŸ†• Veraltete Charts > 72h** â†’ Auto-Update erforderlich

---

## ğŸ¯ ERWEITERTE KRITISCHE ERFOLGSFAKTOREN (UPDATED)

### **Null-Toleranz-Bereiche:**
1. **alwaysApply: true** â†’ Sofortige Auto-Korrektur (nie User fragen)
2. **Undokumentierte Features** â†’ Automatische Integration in < 5 Min
3. **Rule-Code-Divergenz** â†’ Live-Sync ohne User-Intervention
4. **Compliance-Violations** â†’ Blockiert weitere Arbeit bis behoben
5. **ğŸ†• Fehlende Critical Review** â†’ Keine Ã„nderungen ohne RÃ¼ckfragen
6. **ğŸ†• Chart-Inkonsistenzen** â†’ Sofortige Regeneration erforderlich

### **Performance-Ziele:**
- Auto-Fix-Zeit: < 10 Sekunden
- Live-Sync-Latenz: < 5 Sekunden  
- Health-Check-Zeit: < 30 Sekunden
- Rule-Integration-Zeit: < 2 Minuten
- **ğŸ†• Daily Start Workflow: < 60 Sekunden**
- **ğŸ†• Critical Review Response: < 30 Sekunden**
- **ğŸ†• Chart-Update-Zeit: < 15 Sekunden**

---

> **ZIEL:** Ein vollstÃ¤ndig selbstregulierendes System mit tÃ¤glichem "Guten Morgen" Workflow, kritischen RÃ¼ckfragen bei allen Ã„nderungen, und kontinuierlicher visueller Ãœbersicht durch Dependency & Flow Charts - alles mit Null-Toleranz fÃ¼r Inkonsistenzen.
