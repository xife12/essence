
### Upload-Berechtigungen:
| Berechtigung | Beschreibung | Icon | Verhalten |
|-------------|--------------|------|-----------|
| **none** | Keine Upload-Berechtigung | âŒ | Kann keine Dateien hochladen oder sehen |
| **own_files** | Nur eigene Dateien | ğŸ“ | Kann eigene Dateien hochladen und verwalten |
| **all_files** | Alle Dateien | ğŸ›¡ï¸ | Kann alle (sichtbaren) Dateien verwalten |

### Admin-Dateien-Zugriff:
- **Admin/Studioleiter**: Automatisch alle Admin-Dateien sichtbar
- **Mitarbeiter**: Optional freigeschaltet Ã¼ber `can_see_admin_files`

### UI-Komponenten:
- `FilePermissionsTab`: Berechtigungsmatrix-Tabelle
- **Live-Updates**: Ã„nderungen werden sofort gespeichert
- **Farbkodierung**: Rot (keine), Blau (eigene), GrÃ¼n (alle)
- **Toggle-Buttons**: Ein-Klick fÃ¼r Admin-Dateien-Zugriff
- **Dropdown-Auswahl**: Upload-Berechtigungen fÃ¼r Mitarbeiter
- **Automatik-Anzeige**: Admins/Studioleiter haben feste Rechte

### Validierungslogik:
- Admins/Studioleiter erhalten automatisch `all_files` + `can_see_admin_files = true`
- Neue Mitarbeiter erhalten standardmÃ¤ÃŸig `none` + `can_see_admin_files = false`
- Ã„nderungen nur durch Admin/Studioleiter mÃ¶glich
- Mitarbeiter sehen nur ihre eigenen Berechtigungen

---

## â±ï¸ Stundenerfassung & Urlaub

### Tabelle: `staff_hours`
- `id`: uuid
- `staff_id`: FK â†’ staff
- `date`: Arbeitsdatum
- `hours`: gearbeitete Stunden (decimal)
- `reason`: optionaler Freitext (z. B. â€BGM-Einsatz")
- `created_at`: Timestamp

### Funktionen:
- Stunden kÃ¶nnen durch Mitarbeiter (eigene) oder Studioleiter/Admin (alle) erfasst werden
- Anzeige als Wochen- und MonatsÃ¼bersicht pro Mitarbeiter
- Visualisierung:
  - Balkenanzeige (z. B. 32/40 Std.)
  - Ampelfarben bei Unter-/ÃœbererfÃ¼llung
- Urlaubstage und Krankheitstage kÃ¶nnen als reason erfasst oder in ein separates Feld ausgelagert werden

### UI-Komponenten:
- `StundenCard`: aktuelle Woche, Summe, Icon
- `StundenModal`: Stunden erfassen (Datum, Zeit, Grund)
- `StundenTabelle`: MonatsÃ¼bersicht

---

## ğŸ”— Integration mit anderen Modulen

### Dateimanager-Modul:
- Berechtigungen werden von `staff_file_permissions` abgerufen
- RLS-Policies in `file_asset` prÃ¼fen diese Berechtigungen
- Storage-Policies entsprechend konfiguriert

### Workflow bei RollenÃ¤nderung:
1. **Rolle wird geÃ¤ndert** (z.B. Mitarbeiter â†’ Studioleiter)
2. **Dateimanager-Berechtigungen werden automatisch angepasst**
3. **Bestehende Uploads bleiben bestehen**
4. **Neue Berechtigungen werden sofort aktiv**

### API-Endpunkte:
- `getStaffFilePermissions()`: Alle Berechtigungen abrufen
- `updateStaffFilePermissions(staffId, permissions)`: Berechtigungen aktualisieren
- `getCurrentUserRole()`: Eigene Rolle abrufen
- `canUserUploadFiles()`: Upload-Berechtigung prÃ¼fen
- `canUserSeeAdminFiles()`: Admin-Dateien-Berechtigung prÃ¼fen