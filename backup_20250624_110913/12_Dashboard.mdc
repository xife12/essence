---
description: "Dashboard: KPI-Ãœbersicht, Zielerreichung und zentrale Steuerung"
alias: "@dashboard"
globs:
  - "app/(protected)/dashboard/**"
  - "components/dashboard/**"
  - "lib/api/dashboard-kpis.ts"
---
---
description: 
globs: 
alwaysApply: true
---
# Modul: Dashboard

## Zweck

Das Dashboard dient als zentrale Ãœbersichtsseite nach dem Login.  
Es liefert aktuelle Kennzahlen, Kampagnenauswertungen und FrÃ¼hwarnindikatoren fÃ¼r KÃ¼ndigungen.

---

## Inhalte (Sektionen)

### ğŸ¯ Zielerreichung

- Fortschrittsbalken
- Berechnung:  
  `(aktive Mitglieder - KÃ¼ndigungen) * 1,1`
- Farbliche Darstellung:
  - GrÃ¼n = Ziel erreicht
  - Gelb = Ziel erreichbar
  - Rot = Ziel gefÃ¤hrdet

### ğŸ“ˆ Leads Monatsziel

- Fortschrittsbalken mit absolutem Zielwert
- Konfigurierbar Ã¼ber Einstellungen

### ğŸ“Š KampagnenÃ¼bersicht

- Alle laufenden Kampagnen (`status = active`)
- KPIs pro Kampagne:
  - Leads generiert
  - VertrÃ¤ge abgeschlossen
  - Conversion-Rate
- Button: â€Zur Kampagneâ€œ (fÃ¼hrt zur Detailansicht)

### ğŸ“… Monatsvergleich

- Diagramm: NeuzugÃ¤nge vs. KÃ¼ndigungen
- Visualisierung:
  - SÃ¤ulen- oder Liniendiagramm
- Datenquelle: `memberships.startdate`, `memberships.enddate`

### ğŸ“ Vertragsverteilung

- Balkendiagramm mit:
  - Anzahl VertrÃ¤ge je Vertragsart
  - Durchschnittliche Restlaufzeit je Vertragsart

### âš ï¸ KÃ¼ndigungswarnung

- Liste aller Mitglieder mit KÃ¼ndigungsdatum in <90 Tagen
- Spalten:
  - Mitglied
  - Vertragsende
  - Kontakt
  - Checkbox: â€kontaktiertâ€œ

---

## API & Datenquellen

- `memberships` â†’ fÃ¼r KPI-Boxen, KÃ¼ndiger, Vertragsstatistik
- `campaigns` + `leads` â†’ fÃ¼r Kampagnenanalyse
- Daten sollten:
  - **serverseitig aggregiert** werden
  - **clientseitig gecacht** werden (z.â€¯B. SWR, React Query)

---

## Rollenrechte

| Rolle        | Dashboard sichtbar | Sicht auf alle KPIs |
|--------------|--------------------|----------------------|
| Mitarbeiter  | âœ… Ja              | ğŸ”¶ nur eigene Leads  |
| Studioleiter | âœ… Ja              | âœ… Ja                |
| Admin        | âœ… Ja              | âœ… Ja                |

---

## UI-Komponenten

- `KpiCard`: Icon + Titel + Wert + Trendindikator
- `ProgressBar`: Balken mit Prozent-Text
- `DashboardChart`: konfigurierbare Diagramm-Komponente (z.â€¯B. `recharts`)
